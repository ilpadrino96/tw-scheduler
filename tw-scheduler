javascript:(function(){function S(){let t,o;const e=()=>{const e=$("#troop_confirm_go"),n=$("#date_arrival"),a=$("#command-data-form"),i=$('<span class="float_right" style="position: absolute; right: 5px;padding: 3px">ðŸŒ½ðŸŒ½ðŸŒ½</span>');n.parents("table:first").attr("width",500),n.parent().after('<tr><td>Programeaza:</td><td style="position: relative"><table><tbody><tr><td>Mod:</td><td><input name="sa-mod" type="radio" value="arrival" checked>Soseste la <input name="sa-mod" type="radio" value="launch"> Lanseaza la</td></tr><tr><td>Data:</td><td><input name="sa-d" type="date" required></td></tr><tr><td>Ora:</td><td><input name="sa-t-h" type="number" min="0" max="23" style="width:40px" required>:<input name="sa-t-m" type="number" min="0" max="59" style="width:40px" required>:<input name="sa-t-s" type="number" min="0" max="59" style="width:40px" required>:<input name="sa-t-ms" type="number" min="0" max="999" style="width:40px" required></td></tr><tr><td>Lansare:</td><td id="sa-launch" style="color:green;font-weight:bold;"></td></tr><tr><td>Sosire:</td><td id="sa-arrival"></td></tr><tr><td>Intoarcere:</td><td id="sa-return"></td></tr><tr><td>Countdown:</td><td id="sa-countdown" style="font-weight:bold;color:blue;"></td></tr><tr><td><button type="button" id="sa-save" class="btn float_left">Salveaza</button>'+i[0].outerHTML+"</td></tr></tbody></table></td></tr>"),$("#sa-save").click(()=>r()),$('input[name="sa-d"],input[name="sa-t-h"],input[name="sa-t-m"],input[name="sa-t-s"],input[name="sa-t-ms"]').val("")},m=()=>Math.round(Timing.getCurrentServerTime()),l=()=>1e3*$("#command-data-form").find(".relative_time").data("duration"),u=()=>{let t=new Date($('input[name="sa-d"]').val());return t.setHours($('input[name="sa-t-h"]').val()),t.setMinutes($('input[name="sa-t-m"]').val()),t.setSeconds($('input[name="sa-t-s"]').val()),t.setMilliseconds($('input[name="sa-t-ms"]').val()),t},c=()=>$('input[name="sa-mod"]:checked').val()==="arrival",f=t=>t instanceof Date?window.Format.date(t/1e3,!0)+":"+window.Format.padLead(t.getUTCMilliseconds(),3):0,d=t=>$("#sa-launch").text(f(t)),h=t=>$("#sa-arrival").text(f(t)),v=t=>$("#sa-return").text(f(t)),g=t=>{let e=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4),a=Math.floor(t%6e4/1e3),i=t%1e3;return${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(a).padStart(2,"0")}.${String(i).padStart(3,"0")}},b=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext),o=t.createOscillator(),e=t.createGain();o.type="sine",o.frequency.setValueAtTime(880,t.currentTime),o.connect(e),e.connect(t.destination),o.start(),e.gain.exponentialRampToValueAtTime(.0001,t.currentTime+.2),o.stop(t.currentTime+.2)}catch(t){}},r=()=>{if($("#command-data-form")[0].reportValidity()){const s=u(),n=l(),a=c()?new Date(s.getTime()-n):s,i=c()?s:new Date(s.getTime()+n),y=new Date(1e3*Math.floor(i.getTime()/1e3)+n);clearTimeout(t),clearInterval(o);let p=a.getTime()-m();p<0&&(p=0),d(a),h(i),v(y),o=setInterval(()=>{let t=a.getTime()-m();t<=0?(clearInterval(o),$("#sa-countdown").text("00:00:00.000")):$("#sa-countdown").text(g(t))},50),t=setTimeout(()=>{b(),HTMLFormElement.prototype.submit.call(document.getElementById("command-data-form")),clearInterval(o)},p)}};$("#command-data-form").length===0?alert("Trebuie sa fii pe pagina de confirmare a comenzii!"):e()}window.ScheduleAttack=new S();})();
